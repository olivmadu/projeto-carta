const bancoDeCartas = [
    {
        id: "mae", 
        nome: "mÃ£e", 
        senha: "cazuza", 
        titulo: "mamÃ£e,",
        texto: `a distÃ¢ncia fÃ­sica pode ser grande, mas Ã© insignificante perto do tamanho da saudade e do amor que sentimos por vocÃª. obrigado por ser nosso porto seguro. feliz natal!`,
        imagem: "/image/mae.jpg",
        assinatura: "suas filhas, duda e capitu"
    },
    {
        id: "justin", 
        nome: "justin", 
        senha: "cristiane", 
        titulo: "justin,",
        texto: `i can't express how meaningful it is for me to see my mom so happy with someone who is so kind and gentle. you are truly part of the family. we're waiting for you here, merry christmas!`,
        imagem: "/image/justin.jpg",
        assinatura: "duda"
    },
    {
        id: "arian",
        nome: "arian",
        senha: "chata",
        titulo: "oi mo",
        texto: `nenhum presente debaixo da Ã¡rvore supera a sorte de ter vocÃª ao meu lado todos os dias. dividir a vida com vocÃª Ã© o meu melhor momento. feliz natal!`,
        imagem: "/image/mo.png",
        assinatura: "sua mo"
    },
    {
        id: "to",
        nome: "tÃ³",
        senha: "helcio",
        titulo: "tÃ³,",
        texto: `obrigada por ser esse alicerce firme ao nosso lado. eu nÃ£o seria a mulher que sou hoje se nÃ£o fossem seus ensinamentos e seu amor. feliz natal!`,
        imagem: "/image/to.jpg",
        assinatura: "sua primeirA netA"
    }, 
    {
        id: "aline",
        nome: "tia aline",
        senha: "leandro",
        titulo: "tia aline,",
        texto: `obrigada por ser meu apoio incondicional e por sua presenÃ§a constante durante toda a minha vida. vocÃª Ã© essencial para mim. feliz natal!`,
        imagem: "/image/aline.jpg",
        assinatura: "sua sobrinha favorita"
    },
    {
        id: "clarice",
        nome: "clarice",
        senha: "taylor",
        titulo: "claricinha",
        texto: `te acompanhar crescer Ã© um privilÃ©gio imenso na minha vida, o mundo Ã© pequeno para o seu brilho. feliz natal!`,
        imagem: "/image/clarice.jpg",
        assinatura: "sua prima favorita"
    },
    {
        id: "leandro",
        nome: "leandro",
        senha: "aline",
        titulo: "leandro,",
        texto: `obrigada por aumentar nossa famÃ­lia e deixar ela muito mais legal, ainda mais quando vocÃª tÃ¡ desembarcado rsrs. feliz natal!`,
        imagem: "/image/leandro.jpg",
        assinatura: "sua sobrinha favorita"
    },
    {
        id: "murilo",
        nome: "murilo",
        senha: "chato",
        titulo: "murilo",
        texto: `eu sei que vocÃª me ama e adora quando eu estou em bicas, a implicÃ¢ncia Ã© uma forma de amor bobinho. feliz natal!`,
        imagem: "/image/murilo.jpg",
        assinatura: "sua prima favorita"
    },
    {
        id: "mauro",
        nome: "tio mauro",
        senha: "brasil",
        titulo: "tio mauro",
        texto: `eu admiro profundamente a sua forÃ§a e a sua coragem de sempre comeÃ§ar de novo, vocÃª Ã© uma inspiraÃ§Ã£o de resiliÃªncia. feliz natal!`,
        imagem: "/image/mauro.jpg",
        assinatura: "sua primeira sobrinha"
    },
    {
        id: "harley",
        nome: "harley",
        senha: "steam",
        titulo: "harley",
        texto: `eu gosto muito de vocÃª e sinto saudades de vocÃª pequenininho. feliz natal!`,
        imagem: "/image/harley.jpg",
        assinatura: "sua primeira prima"
    },
    {
        id: "lucas",
        nome: "lucas",
        senha: "dota",
        titulo: "lucas",
        texto: `ter crescido com vocÃª fez minha infÃ¢ncia mais feliz. obrigada por ser meu irmÃ£o e meu amigo pra vida toda. feliz natal!`,
        imagem: "/image/lucas.jpg",
        assinatura: "sua melhor irmÃ£"
    },
    {
        id: "mari",
        nome: "mari",
        senha: "maquiagem",
        titulo: "mari",
        texto: `obrigada por estar sempre ao lado do meu irmÃ£o e cuidar dele (parabÃ©ns, vocÃª foi a guerreira escolhida por deus para essa batalha, rs). feliz natal!`,
        imagem: "/image/mari.jpg",
        assinatura: "sua melhor nora"
    },
    {
        id: "rosa",
        nome: "rosa",
        senha: "aÃ§ai",
        titulo: "senhora rosa,",
        texto: `muchas gracias por todo el cariÃ±o, y en especial por traer al mundo el gran amor de mi vida. Â¡feliz navidad!`,
        imagem: "/image/rosa.png",
        assinatura: "interrogaciÃ³n"
    },
    {
        id: "kennet",
        nome: "kennet",
        senha: "aÃ§ai",
        titulo: "kennet,",
        texto: `gracias por acompaÃ±arme, por ser un fanboy y por compartir el gusto por las cosas extraÃ±as (jejejejeje). Â¡es genial tenerte como familia, feliz navidad!`,
        imagem: "/image/kennet.png",
        assinatura: "interrogaciÃ³n"
    },
    {
        id: "ramon",
        nome: "ramon",
        senha: "maromba",
        titulo: "ramon,",
        texto: `sempre que penso em vocÃª, fico feliz por ter ganhado mais um irmÃ£o pela vida, conta sempre comigo. feliz natal!`,
        imagem: "/image/ramon.jpg",
        assinatura: "sua hermana do peru"
    },
    {
        id: "raphael",
        nome: "raphael",
        senha: "carro",
        titulo: "raphael,",
        texto: `que 2026 realize todos seus sonhos, te traga muito amor, paz, esperanÃ§a e saÃºde. feliz natal!`,
        imagem: "/image/raphael.jpg",
        assinatura: "duda"
    },
    {
        id: "huesny",
        nome: "huesny",
        senha: "raphael",
        titulo: "huesny,",
        texto: `te desejo muito amor, paz, saÃºde e esperanÃ§a para 2026. feliz natal!`,
        imagem: "/image/huesny.jpg",
        assinatura: "duda"
    },
    {
        id: "padrinho",
        nome: "padrinho",
        senha: "flamengo",
        titulo: "padrinho,",
        texto: `obrigada por se fazer tÃ£o presente na minha vida e nunca deixar que me faltasse o amor e a imagem de um pai. feliz natal!`,
        imagem: "/image/padrinho.jpg",
        assinatura: "dudinha"
    },
    {
        id: "dindinha",
        nome: "dindinha",
        senha: "praia",
        titulo: "dindinha,",
        texto: `obrigada por ser essa mulher incrÃ­vel que sempre foi minha maior referÃªncia de como eu quero ser quando crescer. feliz natal!`,
        imagem: "/image/dindinha.jpg",
        assinatura: "dudinha"
    },
    {
        id: "kaua",
        nome: "kaua",
        senha: "iphone",
        titulo: "kauÃ£,",
        texto: `obrigada por marcar uma das melhores Ã©pocas da minha vida e me dar a alegria de ser irmÃ£ mais velha. tenho orgulho de vocÃª. feliz natal!`,
        imagem: "/image/kaua.jpg",
        assinatura: "duda"
    },
    {
        id: "sara",
        nome: "sara",
        senha: "cabofrio",
        titulo: "sara,",
        texto: `obrigada por cuidar com tanto carinho de quem eu amo e por ter somado tanto na nossa grande famÃ­lia. feliz natal!`,
        imagem: "/image/sara.jpg",
        assinatura: "duda"
    },
    {
        id: "kaiky",
        nome: "kaiky",
        senha: "joaquim",
        titulo: "kaiky,",
        texto: `obrigada por sempre trazer alegria e luz para todos os lugares onde vocÃª chega. sÃ³ quem se arrisca vive o extraordinÃ¡rio. feliz natal!`,
        imagem: "/image/kaiky.jpg",
        assinatura: "duda"
    },
    {
        id: "morgana",
        nome: "morgana",
        senha: "madalena",
        titulo: "morgana,",
        texto: `te desejo muito amor e sucesso para 2026! que venha o tÃ£o sonhado CRM (e depois o casamento!). feliz natal!`,
        imagem: "/image/morgana.jpg",
        assinatura: "duda"
    },
    {
        id: "emma",
        nome: "emma",
        senha: "roblox",
        titulo: "emma,",
        texto: `gracias por darme la oportunidad de conocerte y verte crecer como una niÃ±a tan linda y dulce. siempre te extraÃ±o, Â¡feliz navidad!`,
        imagem: "/image/emma.png",
        assinatura: "duda"
    },
    {
        id: "jeremy",
        nome: "jeremy",
        senha: "chato",
        titulo: "jeremy,",
        texto: `gracias por todo el cariÃ±o y por elegir cuidarme y ser como un hermano mayor para mi. Â¡feliz navidad!`,
        imagem: "/image/jeremy.png",
        assinatura: "interrogaciÃ³n"
    },
    {
        id: "marlon",
        nome: "marlon",
        senha: "alianza",
        titulo: "marlon,",
        texto: `gracias por todo el cariÃ±o y por abrazar a nuestras familias como si fueran una sola. Â¡feliz navidad!`,
        imagem: "/image/marlon_jessica.png",
        assinatura: "duda"
    },
    {
        id: "jessica",
        nome: "jessica",
        senha: "friends",
        titulo: "jessy,",
        texto: `gracias por todo el cariÃ±o y por ser siempre tan linda. estoy muy contenta de que ahora seamos familia. Â¡feliz navidad!`,
        imagem: "/image/marlon_jessica.png",
        assinatura: "duda"
    },
    {
        id: "karina",
        nome: "karina y lulu",
        senha: "luciana",
        titulo: "karina y luciana,",
        texto: `estoy muy emocionada de conocerlas en persona y que podamos disfrutar de mucho tiempo juntas. Â¡feliz navidad!`,
        imagem: "/image/lulu.png",
        assinatura: "duda"
    },
];
const hubScreen = document.getElementById('hub-screen');
const letterScreen = document.getElementById('letter-screen');
const passwordModal = document.getElementById('password-modal');
const gridCartas = document.querySelector('.grid-cartas');
const errorMsg = document.getElementById('error-msg');
const passwordInput = document.getElementById('password-input');

const cartaTitulo = document.getElementById('carta-titulo');
const cartaTexto = document.getElementById('carta-texto');
const cartaImg = document.getElementById('carta-img');
const cartaAssinatura = document.getElementById('carta-assinatura');

let cartaSelecionada = null; 

function criarEnvelopes() {
    bancoDeCartas.forEach(carta => {
        const div = document.createElement('div');
        div.className = 'mini-envelope';
        div.innerHTML = `<span class="label-nome">${carta.nome}</span>`;
        div.onclick = () => abrirModal(carta);
        gridCartas.appendChild(div);
    });
}

function abrirModal(carta) {
    cartaSelecionada = carta;
    errorMsg.classList.add('hidden');
    passwordInput.value = '';
    passwordModal.classList.remove('hidden');
    passwordInput.focus();
}

function fecharModal() {
    passwordModal.classList.add('hidden');
    cartaSelecionada = null;
}

function verificarSenha() {
    const senhaDigitada = passwordInput.value;

    if (senhaDigitada === cartaSelecionada.senha) {
        preencherCarta(cartaSelecionada);
        fecharModal();
        irParaCarta();
    } else {
        errorMsg.classList.remove('hidden');
        document.querySelector('.modal-box').animate([
            { transform: 'translateX(0)' },
            { transform: 'translateX(-10px)' },
            { transform: 'translateX(10px)' },
            { transform: 'translateX(0)' }
        ], { duration: 300 });
    }
}

function preencherCarta(dados) {
    cartaTitulo.innerText = dados.titulo;
    cartaTexto.innerHTML = dados.texto; 
    cartaImg.src = dados.imagem;
    cartaAssinatura.innerText = dados.assinatura;
}

function irParaCarta() {
    hubScreen.classList.add('hidden');
    letterScreen.classList.remove('hidden');
}

function voltarParaHub() {
    document.getElementById('envelope-container')?.classList.remove('open'); 
    document.getElementById('envelope').parentElement.parentElement.classList.remove('open'); 
    
    letterScreen.classList.add('hidden');
    hubScreen.classList.remove('hidden');
}

const envelopeWrapper = document.getElementById('envelope');
const container = document.getElementById('letter-screen');

envelopeWrapper.addEventListener('click', () => {
    container.classList.add('open');
});


function createSnowflake() {
    const flake = document.createElement('div');
    flake.classList.add('snowflake');

    const startLeft = Math.random() * window.innerWidth; 
    const size = Math.random() * 5 + 3; 
    const duration = Math.random() * 5 + 5; 
    const opacity = Math.random() * 0.5 + 0.3; 

    flake.style.left = startLeft + 'px';
    flake.style.width = size + 'px';
    flake.style.height = size + 'px';
    flake.style.opacity = opacity;
    flake.style.animationDuration = duration + 's';

    document.body.appendChild(flake);

    setTimeout(() => {
        flake.remove();
    }, duration * 1000);
}

setInterval(createSnowflake, 200);

const audio = document.getElementById('bg-music');
const musicBtn = document.getElementById('music-btn');

audio.volume = 0.4; 

function toggleMusic() {
    if (audio.paused) {
        audio.play();
        musicBtn.innerHTML = "ðŸŽµ"; 
        musicBtn.classList.remove('paused');
    } else {
        audio.pause();
        musicBtn.innerHTML = "ðŸ”‡"; 
        musicBtn.classList.add('paused');
    }
}

musicBtn.addEventListener('click', (e) => {
    e.stopPropagation(); 
    toggleMusic();
});

window.addEventListener('load', () => {
    const playPromise = audio.play();

    if (playPromise !== undefined) {
        playPromise.catch(error => {
            console.log("Autoplay bloqueado pelo navegador. Aguardando interaÃ§Ã£o.");
            
            document.body.addEventListener('click', function iniciarMusica() {
                audio.play();
                musicBtn.innerHTML = "ðŸŽµ";
                document.body.removeEventListener('click', iniciarMusica);
            }, { once: true });
        });
    }
});

window.onload = criarEnvelopes;